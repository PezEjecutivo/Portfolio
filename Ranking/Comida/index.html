<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Ranking de Alimentos</title>
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
        <link rel="stylesheet" href="./style.css" />
    </head>

    <body>
        <div class="ranking-container">
            <h1>Ranking de Alimentos</h1>

            <div class="controls-container">
                <div class="filter-container">
                    <button class="filter-btn active" data-filter="all">Todos</button>
                    <button class="filter-btn" data-filter="9">9+</button>
                    <button class="filter-btn" data-filter="7">7-8</button>
                    <button class="filter-btn" data-filter="5">5-6</button>
                    <button class="filter-btn" data-filter="4">4</button>
                    <button class="filter-btn" data-filter="0">0-3</button>
                </div>

                <div class="sort-container">
                    <button class="sort-btn" data-sort="desc">
                        <i class="fas fa-sort-amount-down"></i> Mayor a menor
                    </button>
                    <button class="sort-btn" data-sort="asc">
                        <i class="fas fa-sort-amount-up"></i> Menor a mayor
                    </button>
                </div>
            </div>

            <div id="food-cards-container">
                <div class="food-card" data-rating="5.5">
                    <div class="food-image">
                        <img src="../../media/pizzaBaconPolloBufalo.jpg" alt="Pizza de jamón y pollo bufalo" />
                    </div>
                    <div class="food-info">
                        <p class="food-name">Pizza de jamón y pollo bufalo</p>
                        <p class="food-description">
                            Sinceramente, la pizza de jamón y queso esta mejor, el pollo bufalo solo resta
                        </p>
                    </div>
                    <div class="food-rating">
                        <p class="rating-value rating-medium">5.5</p>
                    </div>
                </div>

                <div class="food-card" data-rating="7">
                    <div class="food-image">
                        <img src="https://example.com/pan.jpg" alt="Pan de queso" />
                    </div>
                    <div class="food-info">
                        <p class="food-name">Pan de queso</p>
                        <p class="food-description">Un aperitivo genial para clases</p>
                    </div>
                    <div class="food-rating">
                        <p class="rating-value rating-medium">7</p>
                    </div>
                </div>

                <div class="food-card" data-rating="7">
                    <div class="food-image">
                        <img src="../../media/Mikado.jpg" alt="Mikado" />
                    </div>
                    <div class="food-info">
                        <p class="food-name">Mikado</p>
                        <p class="food-description">Un poco caro, pero buena calidad y con +3 de flow</p>
                    </div>
                    <div class="food-rating">
                        <p class="rating-value">7</p>
                    </div>
                </div>

                <div class="food-card" data-rating="8.2">
                    <div class="food-image">
                        <img src="../../media/hamburguesa.png" alt="Hamburguesa chuche" />
                    </div>
                    <div class="food-info">
                        <p class="food-name">Hamburguesa chuche</p>
                        <p class="food-description">Siempre es una buena opción, de las mejores chuches blandas</p>
                    </div>
                    <div class="food-rating">
                        <p class="rating-value rating-high">8.2</p>
                    </div>
                </div>

                <div class="food-card" data-rating="3.5">
                    <div class="food-image">
                        <img src="../../media/tijuanaCrunch.jpg" alt="Tijuana Crunch" />
                    </div>
                    <div class="food-info">
                        <p class="food-name">Tijuana Crunch</p>
                        <p class="food-description">Bastante decepción, ni siquiera un 5,5</p>
                    </div>
                    <div class="food-rating">
                        <p class="rating-value rating-low">3.5</p>
                    </div>
                </div>

                <div class="food-card" data-rating="10">
                    <div class="food-image">
                        <img src="../../media/gatoBotella.jpg" alt="Gato botella" />
                    </div>
                    <div class="food-info">
                        <p class="food-name">Gato botella</p>
                        <p class="food-description">Literalmente increible</p>
                    </div>
                    <div class="food-rating">
                        <p class="rating-value rating-legendary">10</p>
                    </div>
                </div>

                <div class="food-card" data-rating="9.5">
                    <div class="food-image">
                        <img src="../../media/bagelJamon.jpg" alt="Bagel serrano" />
                    </div>
                    <div class="food-info">
                        <p class="food-name">Bagel serrano</p>
                        <p class="food-description">Literalmente increible, pocas cosas tienen mejor combinación</p>
                    </div>
                    <div class="food-rating">
                        <p class="rating-value rating-legendary">9.5</p>
                    </div>
                </div>

                <div class="food-card" data-rating="4">
                    <div class="food-image">
                        <img src="../../media/cornettiCroccanti.jpg" alt="Cornetti Crocanti" />
                    </div>
                    <div class="food-info">
                        <p class="food-name">Cornetti Crocanti</p>
                        <p class="food-description">Como los barquillos de nata, pero bastante peor</p>
                    </div>
                    <div class="food-rating">
                        <p class="rating-value rating-low">4</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="floating-btn" id="legendBtn">
            <i class="fas fa-chart-bar"></i>
        </div>

        <div class="modal" id="legendModal">
            <div class="modal-content">
                <span class="close-btn" id="closeModal">&times;</span>
                <div class="legend-card">
                    <p class="legend-title">Leyenda de Calificaciones</p>
                    <p class="legend-item">0-3: No me gusta</p>
                    <p class="legend-item">4: Me lo comería si hace falta</p>
                    <p class="legend-item">5-6: Está bien</p>
                    <p class="legend-item">7-8: Lo preferiría sobre otras cosas</p>
                    <p class="legend-item">9-10: Está increíblemente genial, lo compraría siempre</p>
                </div>
            </div>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const legendBtn = document.getElementById("legendBtn");
                const legendModal = document.getElementById("legendModal");
                const closeModal = document.getElementById("closeModal");
                const filterButtons = document.querySelectorAll(".filter-btn");
                const sortButtons = document.querySelectorAll(".sort-btn");
                const foodCardsContainer = document.getElementById("food-cards-container");
                let foodCards = Array.from(document.querySelectorAll(".food-card"));
                let currentFilter = "all";
                let currentSort = null;

                legendBtn.addEventListener("click", function () {
                    legendModal.style.display = "flex";
                });

                closeModal.addEventListener("click", function () {
                    legendModal.style.display = "none";
                });

                legendModal.addEventListener("click", function (e) {
                    if (e.target === legendModal) {
                        legendModal.style.display = "none";
                    }
                });

                function applyFilterAndSort() {
                    let filteredCards = foodCards;

                    if (currentFilter !== "all") {
                        const filterValue = parseFloat(currentFilter);
                        filteredCards = foodCards.filter((card) => {
                            const cardRating = parseFloat(card.getAttribute("data-rating"));

                            if (filterValue === 9 && cardRating >= 9) return true;
                            if (filterValue === 7 && cardRating >= 7 && cardRating < 9) return true;
                            if (filterValue === 5 && cardRating >= 5 && cardRating < 7) return true;
                            if (filterValue === 4 && cardRating == 4) return true;
                            if (filterValue === 0 && cardRating <= 3) return true;
                            return false;
                        });
                    }

                    if (currentSort) {
                        filteredCards.sort((a, b) => {
                            const ratingA = parseFloat(a.getAttribute("data-rating"));
                            const ratingB = parseFloat(b.getAttribute("data-rating"));
                            return currentSort === "desc" ? ratingB - ratingA : ratingA - ratingB;
                        });
                    }

                    foodCardsContainer.innerHTML = "";
                    filteredCards.forEach((card) => {
                        foodCardsContainer.appendChild(card);
                    });
                }

                filterButtons.forEach((button) => {
                    button.addEventListener("click", function () {
                        currentFilter = this.getAttribute("data-filter");
                        filterButtons.forEach((btn) => btn.classList.remove("active"));
                        this.classList.add("active");
                        applyFilterAndSort();
                    });
                });

                sortButtons.forEach((button) => {
                    button.addEventListener("click", function () {
                        const sortDirection = this.getAttribute("data-sort");

                        if (currentSort === sortDirection) {
                            currentSort = null;
                            sortButtons.forEach((btn) => btn.classList.remove("active"));
                        } else {
                            currentSort = sortDirection;
                            sortButtons.forEach((btn) => btn.classList.remove("active"));
                            this.classList.add("active");
                        }

                        applyFilterAndSort();
                    });
                });
            });
        </script>
    </body>
</html>
